# Production Environment Configuration for Railway Deployment
# Copy these variables to Railway Dashboard â†’ Variables tab

# =============================================================================
# ENVIRONMENT CONFIGURATION
# =============================================================================
NODE_ENV=production

# =============================================================================
# DATABASE CONFIGURATION (MongoDB Atlas)
# =============================================================================
# Replace with your MongoDB Atlas connection string
# Format: mongodb+srv://<username>:<password>@<cluster-url>/<database>?retryWrites=true&w=majority
MONGO_URI=mongodb+srv://websiteadmin:<db_password>@website-aksesoris-clust.pfdrccn.mongodb.net/?appName=website-aksesoris-cluster

# =============================================================================
# JWT AUTHENTICATION
# =============================================================================
# Generate a secure JWT secret (32+ characters):
# openssl rand -base64 32
JWT_SECRET=your_super_secure_jwt_secret_change_this_in_production_32+_characters_minimum
JWT_EXPIRE=3600

# =============================================================================
# DATA ENCRYPTION
# =============================================================================
# Generate a 32-character encryption key:
# openssl rand -hex 32
ENCRYPTION_KEY=your_32_character_encryption_key_here_12345678901234567890123456789012

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
# Railway will automatically assign a PORT, but you can specify one
PORT=5000

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# Railway frontend URL (adjust based on your actual deployment)
# Check your Railway dashboard for the correct frontend URL
FRONTEND_URL=https://website-aksesoris-frontend-production.up.railway.app

# Development/Testing CORS fallback (set to 'true' for testing only)
# Set to 'false' or remove in production for security
ALLOW_ALL_ORIGINS=false

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================
# Maximum file size in bytes (5MB = 5242880 bytes)
MAX_FILE_SIZE=5242880

# Allowed file types for uploads
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/jpg,application/pdf,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================
# Rate limit window in minutes
RATE_LIMIT_WINDOW=15

# Maximum requests per window
RATE_LIMIT_MAX=100

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
# Log level: error, warn, info, debug
LOG_LEVEL=info

# =============================================================================
# TELEGRAM BOT CONFIGURATION (Optional)
# =============================================================================
# Only configure if using Telegram bot functionality
# TELEGRAM_BOT_TOKEN=your_telegram_bot_token
# TELEGRAM_WEBHOOK_URL=https://your-app.railway.app/api/telegram/webhook

# =============================================================================
# SECURITY NOTES
# =============================================================================
# 1. Never commit this file with real values to version control
# 2. Generate unique secrets for production (JWT_SECRET, ENCRYPTION_KEY)
# 3. Use strong, random passwords for MongoDB Atlas
# 4. Ensure your MongoDB Atlas cluster allows connections from Railway
# 5. Keep your environment variables secure and rotate them regularly

# =============================================================================
# TROUBLESHOOTING CORS ISSUES
# =============================================================================
# If you encounter CORS errors:
# 
# 1. Check your frontend URL in Railway dashboard
# 2. Update FRONTEND_URL with the correct frontend URL
# 3. For testing purposes, temporarily set ALLOW_ALL_ORIGINS=true
# 4. Check Railway logs for detailed CORS error messages
# 5. Ensure your frontend is properly deployed and accessible
#
# Common frontend URLs:
# - Railway: https://your-app-name-frontend-production.up.railway.app
# - Vercel: https://your-app.vercel.app
# - Netlify: https://your-app.netlify.app
#
# After fixing, redeploy your backend to Railway:
# 1. Update environment variables in Railway dashboard
# 2. Redeploy the service
# 3. Check the health endpoint: https://your-backend.railway.app/api/health
